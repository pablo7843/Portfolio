---
import Badge from '../components/Badge.astro';
import Header from '../components/Header.astro';
import Tecnologias from '../components/Tecnologias.astro';
import Layout from '../layouts/Layout.astro';
import Trabajos from '../components/Trabajos.astro';
import Socials from '../components/Socials.astro';
import InteractiveShell from '../components/InteractiveShell.astro';
import Footer from '../components/Footer.astro';
---

<Layout title="Portfolio PC">
  <Header/>

  <main>
    <div class="terminal" data-aos="fade-up" data-aos-duration="1200">
      <div class="terminal-header">
        <span class="terminal-button red"></span>
        <span class="terminal-button yellow"></span>
        <span class="terminal-button green"></span>
      </div>

      <div class="terminal-content">
        <div class="text" data-aos="zoom-in" data-aos-delay="300">
          <h1 class="title">
            <span id="type-title" class="js-typing"></span>
            <span id="badge-container" class="hidden-badge">
              <Badge>I'm open to work!</Badge>
            </span>
          </h1>

          <h2 class="subtitle">
            <span id="type-subtitle" class="js-typing"></span>
          </h2>
        </div>

        <div class="photo-container" data-aos="fade-down" data-aos-delay="400">
          <img src="/foto.png" alt="Pablo" class="photo"/>
        </div>
      </div>
    </div>
  </main>

  <section data-aos="fade-up" data-aos-duration="1300">
    <InteractiveShell />
  </section>

  <section data-aos="fade-up" data-aos-duration="1300">
    <Socials />
  </section>

  <section data-aos="fade-up" data-aos-duration="1300">
    <Tecnologias />
  </section>

  <section data-aos="fade-up" data-aos-duration="1300">
    <Trabajos />
  </section>
  <Footer />
</Layout>

<style>
/* ----- MAIN WRAPPER ----- */
main {
  margin: 60px auto;
  padding: 0 20px;
  max-width: 1400px;
  width: 100%;
  box-sizing: border-box;
}

/* ----- TERMINAL BOX ----- */
.terminal {
  background-color: var(--bg-dark);
  border: 2px solid var(--primary-color);
  border-radius: 8px;
  box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
  width: 100%;
  overflow: hidden;
  transition: all 0.3s ease;
}

/* ----- TERMINAL HEADER ----- */
.terminal-header {
  background-color: var(--bg-header, #1a1a2e);
  padding: 12px;
  display: flex;
  gap: 8px;
  border-bottom: 1px solid var(--primary-color);
}

.terminal-button {
  width: 12px;
  height: 12px;
  border-radius: 50%;
}
.red { background-color: #ff5f56; }
.yellow { background-color: #ffbd2e; }
.green { background-color: #27c93f; }


/* ----- TERMINAL CONTENT (DISPOSICI√ìN PC) ----- */
.terminal-content {
  padding: 60px;
  display: flex;
  flex-direction: row; /* üî• Vuelve a ser horizontal en PC */
  align-items: center;
  justify-content: space-between;
  gap: 4rem;
  width: 100%;
  box-sizing: border-box;
}

/* ----- TEXT ----- */
.text {
  flex: 2; /* Toma m√°s espacio que la foto */
  text-align: left; /* Alineado a la izquierda en PC */
}

/* ----- PHOTO ----- */
.photo-container {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
}

.photo {
  width: 320px; /* Un poco m√°s grande para PC */
  height: 320px;
  border-radius: 10px;
  border: 3px solid var(--primary-color);
  object-fit: cover;
  box-shadow: 0 0 15px rgba(0, 255, 0, 0.4);
}

/* ----- TITLES ----- */
.title {
  font-size: 3.5rem; /* Tama√±o original de PC */
  display: flex;
  align-items: center;
  flex-wrap: wrap; 
  gap: 1.5rem;
  font-weight: 700;
  margin-bottom: 1.5rem;
  color: var(--text-primary);
  font-family: 'Courier New', monospace;
  min-height: 4rem;
}

.subtitle {
  font-size: 1.8rem;
  font-weight: 500;
  color: var(--text-secondary);
  font-family: 'Courier New', monospace;
  max-width: 800px;
  line-height: 1.4;
}

/* ----- JS TYPING STUFF ----- */
.js-typing {
  white-space: normal;
  display: inline;
}

.cursor-active {
  border-right: 3px solid var(--primary-color);
  padding-right: 5px;
  animation: blink 1s step-end infinite;
}

@keyframes blink {
  50% { border-color: transparent; }
}

.hidden-badge {
  opacity: 0;
  transform: scale(0.8);
  display: none;
}

.show-badge {
  display: inline-block;
  animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes popIn {
  to { opacity: 1; transform: scale(1); }
}


/* ----- ‚≠ê RESPONSIVE (DISPOSICI√ìN M√ìVIL) ‚≠ê ----- */
@media (max-width: 1024px) {
  .terminal-content {
    flex-direction: column-reverse; /* Foto arriba, texto abajo */
    text-align: center;
    padding: 30px;
    gap: 2rem;
  }

  .text {
    text-align: center;
    flex: 1;
  }

  .title {
    font-size: 2.2rem;
    justify-content: center;
  }

  .subtitle {
    font-size: 1.2rem;
    margin: 0 auto;
  }

  .photo {
    width: 200px;
    height: 200px;
  }
}
</style>

<script>
  // @ts-nocheck 
  document.addEventListener('DOMContentLoaded', () => {
    const text1 = "Hey, I'm Pablo Climent";
    const text2 = "Currently studying Cybersecurity. Specialized in Web and Mobile Development.";
    
    const titleEl = document.getElementById('type-title');
    const subtitleEl = document.getElementById('type-subtitle');
    const badgeEl = document.getElementById('badge-container');

    if (!titleEl || !subtitleEl) return;

    function typeWriter(element, text, speed, callback) {
      let i = 0;
      element.textContent = "";
      element.classList.add('cursor-active');

      function type() {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
          const randomSpeed = speed + (Math.random() * 30 - 15);
          setTimeout(type, randomSpeed);
        } else {
          element.classList.remove('cursor-active');
          if (callback) callback();
        }
      }
      type();
    }

    setTimeout(() => {
      typeWriter(titleEl, text1, 60, () => {
        if(badgeEl) badgeEl.classList.add('show-badge');
        setTimeout(() => {
          typeWriter(subtitleEl, text2, 35, () => {
            subtitleEl.classList.add('cursor-active');
          });
        }, 400);
      });
    }, 800);
  });
</script>